---
import DocsLayout from '../../../layouts/DocsLayout.astro';
---

<DocsLayout
  title="Memory Store - hitlimit | In-Memory Rate Limiting for Node.js"
  description="Fast in-memory rate limiting storage. Zero configuration, automatic cleanup, ideal for development and single-instance deployments. The default hitlimit store."
  keywords="memory store rate limit, in-memory rate limiter, nodejs memory store, fast rate limit store, development rate limiter, single instance rate limit, zero config rate limit"
>
  <h1>Memory Store</h1>

  <p>The memory store is the default storage backend. It keeps rate limit data in memory, making it fast but non-persistent.</p>

  <h2 id="usage">Usage</h2>

  <p>The memory store is used by default when no store is specified:</p>

  <div class="code-block">
    <pre><code><span class="kw">import</span> {"{"} hitlimit {"}"} <span class="kw">from</span> <span class="str">'@joint-ops/hitlimit'</span>

<span class="cm">// Memory store is the default</span>
app.<span class="fn">use</span>(<span class="fn">hitlimit</span>({"{"} limit: <span class="num">100</span>, window: <span class="str">'1m'</span> {"}"}))</code></pre>
  </div>

  <p>Or explicitly configure it:</p>

  <div class="code-block">
    <pre><code><span class="kw">import</span> {"{"} hitlimit, memoryStore {"}"} <span class="kw">from</span> <span class="str">'@joint-ops/hitlimit'</span>

app.<span class="fn">use</span>(<span class="fn">hitlimit</span>({"{"}
  limit: <span class="num">100</span>,
  window: <span class="str">'1m'</span>,
  store: <span class="fn">memoryStore</span>({"{"}
    cleanupInterval: <span class="num">60000</span>  <span class="cm">// Clean expired entries every 60s</span>
  {"}"})
{"}"}))</code></pre>
  </div>

  <h2 id="options">Options</h2>

  <table class="options-table">
    <thead>
      <tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
    </thead>
    <tbody>
      <tr><td><code>cleanupInterval</code></td><td>number</td><td>60000</td><td>Interval (ms) to clean expired entries</td></tr>
    </tbody>
  </table>

  <h2 id="characteristics">Characteristics</h2>

  <ul>
    <li><strong>Speed:</strong> Fastest option - no I/O overhead</li>
    <li><strong>Persistence:</strong> Data is lost on restart</li>
    <li><strong>Scalability:</strong> Not shared between instances</li>
    <li><strong>Memory:</strong> Grows with unique keys; auto-cleanup removes expired entries</li>
  </ul>

  <h2 id="when-to-use">When to Use</h2>

  <ul>
    <li>Development and testing</li>
    <li>Single-instance deployments</li>
    <li>When persistence is not required</li>
    <li>Low-traffic applications</li>
  </ul>

  <h2 id="limitations">Limitations</h2>

  <ul>
    <li>Rate limits reset on server restart</li>
    <li>Not suitable for multi-server deployments</li>
    <li>Memory usage increases with unique client keys</li>
  </ul>
</DocsLayout>

<style>
  .options-table { width: 100%; margin: 1.5rem 0; border-collapse: collapse; border: 1px solid var(--color-border); border-radius: 0.75rem; overflow-x: auto; }
  .options-table th { background: var(--color-bg-surface); text-align: left; padding: 0.75rem 1rem; font-size: 0.875rem; color: var(--color-text-muted); border-bottom: 1px solid var(--color-border); }
  .options-table td { padding: 0.75rem 1rem; border-bottom: 1px solid var(--color-border); color: var(--color-text-secondary); }
  .options-table tr:last-child td { border-bottom: none; }
  .options-table code { background: var(--color-bg-elevated); color: var(--color-accent); padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.875em; }
  .code-block { margin: 1rem 0; border-radius: 0.75rem; border: 1px solid var(--color-border); background: var(--color-bg-surface); overflow: hidden; }
  .code-block pre { margin: 0; padding: 1rem; overflow-x: auto; font-family: var(--font-mono); font-size: 0.875rem; line-height: 1.7; }
  .code-block code { background: none !important; border: none !important; padding: 0 !important; }
  .kw { color: #c792ea; } .str { color: #a6e22e; } .num { color: #fd971f; } .fn { color: #66d9ef; } .cm { color: #71717a; }
</style>
