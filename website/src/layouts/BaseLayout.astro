---
import '../styles/global.css';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  canonical?: string;
}

const {
  title = 'hitlimit - The Fastest Rate Limiter for Node.js, Bun, Express & NestJS',
  description = 'Lightning-fast rate limiting middleware for Node.js, Bun, Express, NestJS, and Elysia. Protect your APIs with sub-millisecond performance, memory/SQLite/Redis stores, and zero config setup.',
  keywords = 'rate limit, rate limiter, rate limiting, express rate limit, express middleware, nestjs rate limit, nestjs throttler, bun rate limit, elysia rate limit, nodejs rate limiter, api rate limiting, throttle requests, request throttling, ddos protection, brute force protection, redis rate limit, sqlite rate limit, api throttling, request limiting, npm rate limit',
  canonical = 'https://hitlimit.dev'
} = Astro.props;

const siteUrl = 'https://hitlimit.dev';
const ogImage = `${siteUrl}/og-image.png`;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="hitlimit" />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="theme-color" content="#00e5ff" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="canonical" href={canonical} />
    <title>{title}</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:site_name" content="hitlimit" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonical} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "hitlimit",
      "description": description,
      "url": siteUrl,
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Cross-platform",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5",
        "ratingCount": "1"
      },
      "author": {
        "@type": "Organization",
        "name": "hitlimit",
        "url": siteUrl
      },
      "keywords": keywords
    })} />
  </head>
  <body class="min-h-screen flex flex-col">
    <!-- Gradient mesh background -->
    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
      <div class="absolute top-0 left-1/4 w-[800px] h-[800px] bg-[radial-gradient(ellipse_at_center,rgba(0,229,255,0.15),transparent_70%)] blur-3xl"></div>
      <div class="absolute top-1/4 right-0 w-[600px] h-[600px] bg-[radial-gradient(ellipse_at_center,rgba(168,85,247,0.1),transparent_70%)] blur-3xl"></div>
      <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-[radial-gradient(ellipse_at_center,rgba(0,229,255,0.08),transparent_70%)] blur-3xl"></div>
    </div>

    <!-- Grid pattern overlay -->
    <div class="fixed inset-0 -z-10 pointer-events-none opacity-[0.02]" style="background-image: url(&quot;data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);"></div>

    <Nav />

    <main class="flex-1">
      <slot />
    </main>

    <Footer />
  </body>
</html>

<style>
  /* Smooth page load animation */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  main {
    animation: fade-in-up 0.6s ease-out;
  }
</style>
